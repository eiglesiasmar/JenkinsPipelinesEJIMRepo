pipeline {
    agent any
    parameters {
            string(name: 'custom_var', defaultValue: '')
    }
    stages{
        stage('MyBuild'){
            steps{
                echo "Hello EJIM"
            }
        }
		stage('Get User input') {
			steps {
				script {
					 def userInput = input(id: 'userInput', message: 'Run Tests?',
					 parameters: [[$class: 'ChoiceParameterDefinition', defaultValue: 'strDef', 
						description:'describing choices', name:'testChoice', choices: "Yes\nNo"]
					 ])
					println(userInput);
					env.custom_var=userInput;
					println(env.custom_var);
				}
			}

		}		

		stage ('Conditional Test') {
			when {
				// Only say hello if a "greeting" is requested
				expression { ${env.custom_var} == 'Yes' }
			}
			steps {
					echo "Running Tests"
			}
		}
		
    }
}
